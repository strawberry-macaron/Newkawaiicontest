<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>2nd Round 表示画面</title>
  <style>
    body {
      background-color: #fdebf0;
      font-family: sans-serif;
      text-align: center;
    }

    h1 {
      color: #b56fdc;
      font-size: 2em;
      margin-top: 20px;
    }

    #player-count {
      margin: 10px;
    }

    .players {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background-color: white;
      border-radius: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      width: 100px;
      height: 420px;
      padding: 10px;
      border: 4px solid #90ee90;
      writing-mode: vertical-rl;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      text-orientation: mixed;
    }

    .card input {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      font-size: 16px;
      width: 80px;
      border: none;
      border-bottom: 1px solid #ccc;
      background: transparent;
      text-align: center;
      margin: 4px 0;
    }

    .score {
      writing-mode: horizontal-tb;
      text-orientation: sideways;
      font-size: 14px;
      margin-top: 10px;
    }

    .controls {
      display: flex;
      flex-direction: column;
      gap: 5px;
      writing-mode: horizontal-tb;
    }

    .color-buttons {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-top: 8px;
      writing-mode: horizontal-tb;
    }

    .color-button {
      padding: 4px 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
    }

    .rank-1 { background-color: #ffb6c1 !important; }
    .rank-2 { background-color: #ffe4e1 !important; }
    .rank-3 { background-color: #fafad2 !important; }
  </style>
</head>
<body>
  <h1>2nd Round 表示画面</h1>
  <div>
    人数を選んでください：
    <select id="player-count">
      <option value="1">1人</option>
      <option value="2">2人</option>
      <option value="3">3人</option>
      <option value="4">4人</option>
      <option value="5" selected>5人</option>
      <option value="6">6人</option>
      <option value="7">7人</option>
      <option value="8">8人</option>
      <option value="9">9人</option>
    </select>
    <button onclick="generatePlayers()">決定</button>
  </div>

  <div class="players" id="player-container"></div>

  <script>
    function generatePlayers() {
      const count = parseInt(document.getElementById("player-count").value);
      const container = document.getElementById("player-container");
      container.innerHTML = "";

      for (let i = 0; i < count; i++) {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <input placeholder="順位" class="rank-input">
          <input placeholder="学校名">
          <input placeholder="プレイヤー名">
          <div class="controls">
            <button onclick="addScore(this, 'maru')">〇</button>
            <button onclick="addScore(this, 'batsu')">×</button>
            <button onclick="resetScore(this)">リセット</button>
          </div>
          <div class="score">〇<span class="maru">0</span> ×<span class="batsu">0</span></div>
          <div class="color-buttons">
            <button class="color-button" onclick="changeColor(this, 'red')">赤</button>
            <button class="color-button" onclick="changeColor(this, 'blue')">青</button>
            <button class="color-button" onclick="changeColor(this, 'yellow')">黄</button>
            <button class="color-button" onclick="changeColor(this, 'green')">緑</button>
          </div>
        `;
        container.appendChild(card);
      }
    }

    function addScore(btn, type) {
      const card = btn.closest(".card");
      const span = card.querySelector("." + type);
      span.textContent = parseInt(span.textContent) + 1;
    }

    function resetScore(btn) {
      const card = btn.closest(".card");
      card.querySelector(".maru").textContent = "0";
      card.querySelector(".batsu").textContent = "0";
    }

    function changeColor(btn, color) {
      const card = btn.closest(".card");
      card.style.backgroundColor = getPastelColor(color);
    }

    function getPastelColor(name) {
      switch(name) {
        case "red": return "#f8c0c0";
        case "blue": return "#c0d8f8";
        case "yellow": return "#fff8b0";
        case "green": return "#c0f0c0";
        default: return "white";
      }
    }

    document.addEventListener("input", e => {
      if (e.target.classList.contains("rank-input")) {
        const card = e.target.closest(".card");
        const val = parseInt(e.target.value);
        card.classList.remove("rank-1", "rank-2", "rank-3");
        if (val === 1) card.classList.add("rank-1");
        else if (val === 2) card.classList.add("rank-2");
        else if (val === 3) card.classList.add("rank-3");
      }
    });

    window.onload = generatePlayers;
  </script>
</body>
</html>
