<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>2nd Round 表示画面</title>
  <link rel="stylesheet" href="round.css">
  <style>
    body {
      background-color: #ffeef5;
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    #player-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 20px;
    }
    .player-card {
      background-color: #e5f6ff;
      border-radius: 20px;
      padding: 16px;
      width: 120px;
      writing-mode: vertical-rl;
      text-align: center;
      position: relative;
      box-shadow: 2px 2px 8px #ccc;
    }
    .rank-input, .school-input, .name-input {
      writing-mode: horizontal-tb;
      width: 100%;
      margin: 4px 0;
    }
    .score-buttons {
      writing-mode: horizontal-tb;
      margin-top: 8px;
    }
    .color-buttons button {
      margin: 2px;
    }
  </style>
</head>
<body>

  <h1>2nd Round 表示画面</h1>

  <label for="numPlayers">人数を選んでください：</label>
  <select id="numPlayers">
    <option value="1">1人</option>
    <option value="3">3人</option>
    <option value="5" selected>5人</option>
    <option value="10">10人</option>
    <option value="36">36人</option>
  </select>
  <button onclick="generatePlayers()">決定</button>

  <div id="player-container"></div>

  <script>
    function generatePlayers() {
      const container = document.getElementById('player-container');
      container.innerHTML = '';
      const num = parseInt(document.getElementById('numPlayers').value);

      for (let i = 0; i < num; i++) {
        const card = document.createElement('div');
        card.className = 'player-card';
        card.innerHTML = `
          <input type="number" class="rank-input" placeholder="順位" min="1">
          <input type="text" class="school-input" placeholder="学校名">
          <input type="text" class="name-input" placeholder="プレイヤー名">

          <div class="score-buttons">
            <button onclick="changeScore(this, 'maru')">〇</button>
            <button onclick="changeScore(this, 'batsu')">×</button>
            <button onclick="resetScore(this)">リセット</button>
            <div class="score-display">0〇 0×</div>
          </div>

          <div class="color-buttons">
            <button onclick="setColor(this, 'red')">赤</button>
            <button onclick="setColor(this, 'blue')">青</button>
            <button onclick="setColor(this, 'yellow')">黄</button>
            <button onclick="setColor(this, 'green')">緑</button>
          </div>
        `;
        container.appendChild(card);
      }
    }

    function changeScore(btn, type) {
      const display = btn.parentElement.querySelector('.score-display');
      const [maruText, batsuText] = display.textContent.split(' ');
      let maru = parseInt(maruText) || 0;
      let batsu = parseInt(batsuText) || 0;
      if (type === 'maru') maru++;
      if (type === 'batsu') batsu++;
      display.textContent = `${maru}〇 ${batsu}×`;
    }

    function resetScore(btn) {
      const display = btn.parentElement.querySelector('.score-display');
      display.textContent = `0〇 0×`;
    }

    function setColor(btn, color) {
      const card = btn.closest('.player-card');
      const pastel = {
        red: '#ffc5c5',
        blue: '#c5dfff',
        yellow: '#fff7c5',
        green: '#d0f7c5'
      };
      card.style.backgroundColor = pastel[color];
    }
  </script>

</body>
</html>
